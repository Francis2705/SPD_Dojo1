/*Francisco Martinez Balian
8-Durante el amarillo: Tiene que sonar 1 vez por segundo 
en un tono SUAVE. 
9-Al cambiar de verde a amarillo debe titilar 
3 veces el verde antes de pasar al amarillo
10-Al cambiar de amarillo a rojo se debe titilar 
3 veces el amarillo
11-Al cambiar de rojo a Amarillo se debe titilar 
3 veces el rojo
12-Al cambiar de amarillo a verde se debe titilar 
3 veces el amarillo.*/

#define LED_VERDE_1 12
#define LED_VERDE_2 11
#define LED_AMARILLO_1 10
#define LED_AMARILLO_2 9
#define LED_ROJO_1 8
#define LED_ROJO_2 7
#define PIEZO 2

int tiempoRyV = 5000;
int tiempoA = 3000;

void setup()
{
  pinMode(LED_VERDE_1, OUTPUT);
  pinMode(LED_VERDE_2, OUTPUT);
  pinMode(LED_AMARILLO_1, OUTPUT);
  pinMode(LED_AMARILLO_2, OUTPUT);
  pinMode(LED_ROJO_1, OUTPUT);
  pinMode(LED_ROJO_2, OUTPUT);
  pinMode(PIEZO, OUTPUT);
  Serial.begin(9600);
}

void loop()
{
  prender(LED_VERDE_1);
  prender(LED_VERDE_2);
  delay(tiempoRyV);
  apagar(LED_VERDE_1);
  apagar(LED_VERDE_2);
  
  titilar(LED_VERDE_1, LED_VERDE_2);
  
  prender(LED_AMARILLO_1);
  prender(LED_AMARILLO_2);
  sonar_piezo(PIEZO, 3, 200);
  //delay(tiempoA);
  apagar(LED_AMARILLO_1);
  apagar(LED_AMARILLO_2);
  
  titilar(LED_AMARILLO_1, LED_AMARILLO_2);
  
  prender(LED_ROJO_1);
  prender(LED_ROJO_2);
  sonar_piezo(PIEZO, 10, 1000);
  apagar(LED_ROJO_1);
  apagar(LED_ROJO_2);
  
  titilar(LED_ROJO_1, LED_ROJO_2);
  
  prender(LED_AMARILLO_1);
  prender(LED_AMARILLO_2);
  //delay(tiempoA);
  sonar_piezo(PIEZO, 3, 200);
  apagar(LED_AMARILLO_1);
  apagar(LED_AMARILLO_2);
  
  titilar(LED_AMARILLO_1, LED_AMARILLO_2);
}

void prender(int led1)
{
  digitalWrite(led1, HIGH);
  Serial.println("Prendo led");
}

void apagar(int led1)
{
  digitalWrite(led1, LOW);
  Serial.println("Apago led");
}

void sonar_piezo(int piezo, int veces, int tono)
{
  int tiempo = 250;

  if(tono < 500) //si el sonido es bajo
  {
    tiempo = 300;
  }
  
  for(int contador = 0; contador < veces; contador ++)
  {
    tone(piezo, tono);
    Serial.println("Hago sonar");
    delay(tiempo);
    noTone(piezo);
    Serial.println("Dejo de sonar");
    delay(tiempo);
  }
}

void titilar(int ledTitilar, int ledTitilar2)
{
  for(int i = 0; i < 4; i++)
  {
    prender(ledTitilar);
    prender(ledTitilar2);
    delay(500);
    apagar(ledTitilar);
    apagar(ledTitilar2);
    delay(500);
  }
}