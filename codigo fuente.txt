/*Francisco Martinez Balian
1- El semáforo tiene que tener 2 leds de cada color 
como mínimo, en caso de que uno se  rompa. 
2- Tiene que implementar los tiempos correctos 
como se detallan a continuación. 
3- El verde dura 5 segundos. 
4- El amarillo dura 3 segundos. 
5- Rojo dura 5 segundos. 
6- Tiene que tener señalización para personas no videntes 
como se detalla a  continuación. (Buzzer o piezo)
7- Durante el rojo: Tiene que sonar 2 vez por segundo 
en un tono FUERTE.*/

#define LED_VERDE_1 12
#define LED_VERDE_2 11
#define LED_AMARILLO_1 10
#define LED_AMARILLO_2 9
#define LED_ROJO_1 8
#define LED_ROJO_2 7
#define PIEZO 2

int tiempoRyV = 5000;
int tiempoA = 3000;

void setup()
{
  pinMode(LED_VERDE_1, OUTPUT);
  pinMode(LED_VERDE_2, OUTPUT);
  pinMode(LED_AMARILLO_1, OUTPUT);
  pinMode(LED_AMARILLO_2, OUTPUT);
  pinMode(LED_ROJO_1, OUTPUT);
  pinMode(LED_ROJO_2, OUTPUT);
  pinMode(PIEZO, OUTPUT);
  Serial.begin(9600);
}

void loop()
{
  prender(LED_VERDE_1);
  prender(LED_VERDE_2);
  delay(tiempoRyV);
  apagar(LED_VERDE_1);
  apagar(LED_VERDE_2);
  
  prender(LED_AMARILLO_1);
  prender(LED_AMARILLO_2);
  delay(tiempoA);
  apagar(LED_AMARILLO_1);
  apagar(LED_AMARILLO_2);
  
  prender(LED_ROJO_1);
  prender(LED_ROJO_2);
  sonar_piezo(PIEZO, 10, 500);
  apagar(LED_ROJO_1);
  apagar(LED_ROJO_2);
  
  prender(LED_AMARILLO_1);
  prender(LED_AMARILLO_2);
  delay(tiempoA);
  apagar(LED_AMARILLO_1);
  apagar(LED_AMARILLO_2);
}

void prender(int led1)
{
  digitalWrite(led1, HIGH);
  Serial.println("Prendo led");
}

void apagar(int led1)
{
  digitalWrite(led1, LOW);
  Serial.println("Apago led");
}

void sonar_piezo(int piezo, int veces, int tono)
{
  for(int contador = 0; contador < veces; contador ++)
  {
    tone(piezo, tono);
    Serial.println("Hago sonar");
    delay(250);
    noTone(piezo);
    Serial.println("Dejo de sonar");
    delay(250);
  }
}